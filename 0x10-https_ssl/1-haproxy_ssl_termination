
# Global settings
global
    log /dev/log local0
    log /dev/log local1 notice
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin
    stats timeout 30s
    user haproxy
    group haproxy
    daemon

    # Default options
    defaults
        log global
        mode http
        option httplog
        option dontlognull
        timeout connect 5000
        timeout client  50000
        timeout server  50000
        errorfile 400 /etc/haproxy/errors/400.http
        errorfile 403 /etc/haproxy/errors/403.http
        errorfile 408 /etc/haproxy/errors/408.http
        errorfile 500 /etc/haproxy/errors/500.http
        errorfile 502 /etc/haproxy/errors/502.http
        errorfile 503 /etc/haproxy/errors/503.http
        errorfile 504 /etc/haproxy/errors/504.http

# Frontend configuration
frontend http-in
    bind *:80
    acl is_web_01 hdr(host) -i 511078-web-01
    acl is_web_02 hdr(host) -i 511078-web-02
    use_backend web_01_servers if is_web_01
    use_backend web_02_servers if is_web_02

# Backend configuration for 511078-web-01
backend web_01_servers
    balance roundrobin
    server server1 35.175.63.50:80 check

# Backend configuration for 511078-web-02
backend web_02_servers
    balance roundrobin
    server server2 3.85.141.123:80 check
